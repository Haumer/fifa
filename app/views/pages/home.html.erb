<h1>Pages#home</h1>

<div class="container">
  <div class="row">
    <% @groups.each do |group| %>
      <div class="group col-xs-12 col-sm-3">
        <%= link_to group_path(group) do %>
          <div class="group-header">
            <h4><%= group.name %></h4>
          </div>
        <% end %>

        <% group.teams.each do |team| %>
          <div class="team-row">
            <%= team.name %>
          </div>
        <% end %>
        <div class="next_match">
          <span>Next Match <%= group.matches.first.home_name %> vs <%= group.matches.first.away_name %></span>
          <br>
          <span id="countdown" class="countdown"><%= group.matches.first.date %></span>
          <script>
          // Set the date we're counting down to
          let countDownDate = new Date(document.getElementById("countdown").innerHTML).getTime();
          console.log(countDownDate)

          // Update the count down every 1 second
          let x = setInterval(function() {

            // Get todays date and time
            let now = new Date().getTime();

            // Find the distance between now an the count down date
            let distance = countDownDate - now;

            // Time calculations for days, hours, minutes and seconds
            let days = Math.floor(distance / (1000 * 60 * 60 * 24));
            let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            let seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("countdown").innerHTML = days + "d " + hours + "h "
            + minutes + "m " + seconds + "s ";

            // If the count down is finished, write some text
            if (distance < 0) {
              clearInterval(x);
              document.getElementById("countdown").innerHTML = "LIVE";
            }
          }, 1000);
          </script>
        </div>
      </div>
    <% end %>
  </div>
</div>


<%= link_to "Matches", matches_path(@matches) %>
<%= link_to "Groups", groups_path(@groups) %>
<%= link_to "Teams", teams_path(@teams) %>

