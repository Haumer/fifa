<!-- <script>
  function clock() {
  var time = new Date(),
      hours = time.getHours(),
      minutes = time.getMinutes(),
      seconds = time.getSeconds();
  document.querySelectorAll('.date_time_now')[0].innerHTML = zeroes(hours) + ":" + zeroes(minutes) + ":" + zeroes(seconds);
    function zeroes(standIn) {
      if (standIn < 10) {
        standIn = '0' + standIn
      }
      return standIn;
    }
  }
  setInterval(clock, 1000);
</script> -->
<% @matches = Match.all %>
<div class="navbar navbar-fixed-top">
  <div class="spacing home_button">
    <%= link_to root_path do %>
       <%= image_tag "logo.png", :class => "navbar_logo" %>
    <% end %>
  </div>
  <div class="spacing navbar-links">
    <%= link_to "Home", root_path %>
    <%= link_to "Matches", matches_path(@matches) %>
    <%= link_to "Groups", groups_path(@groups) %>
    <%= link_to "Teams", teams_path(@teams) %>
  </div>
  <div class="spacing navbar_match">
    <% array_date = [] %>
    <% @matches.each_with_index do |match_data, index| %>
      <% if DateTime.now > match_data.date %>
      <% elsif DateTime.now < match_data.date %>
        <% array_date << @matches[index].date %>
      <% end %>
    <% end %>
    <span>Next Match: </span>
    <span class="upcoming_match">
      <%= array_date.sort.first %>
    </span>
    <script>
    // Set the date we're counting down to
    var countdown_divs = document.querySelectorAll(".upcoming_match")
    console.log(countdown_divs)
    countdown_divs.forEach((div) => {
      var countDownDate = new Date(div.innerHTML).getTime();

      // Update the count down every 1 second
      var x = setInterval(function() {

        // Get todays date and time
        var now = new Date().getTime();

        // Find the distance between now an the count down date
        var distance = countDownDate - now;

        // Time calculations for days, hours, minutes and seconds
        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // Display the result in the element with id="demo"
        div.innerHTML = days + "d " + hours + "h "
        + minutes + "m " + seconds + "s ";

        // If the count down is finished, write some text
        if (distance < 0) {
          clearInterval(x);
          div.innerHTML = "LIVE";
        }
      }, 1000);
    });
    </script>
  </div>
</div>

